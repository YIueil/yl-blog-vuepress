import{_ as t,o as d,c as e,d as r}from"./app-4023f1b2.js";const a={},i=r('<h1 id="索引优化知识点" tabindex="-1"><a class="header-anchor" href="#索引优化知识点" aria-hidden="true">#</a> 索引优化知识点</h1><h2 id="_1-什么是索引" tabindex="-1"><a class="header-anchor" href="#_1-什么是索引" aria-hidden="true">#</a> 1 什么是索引</h2><p>本质是高效查找数据的数据结构，如B+树，类比书籍目录。核心作用是加速数据检索，避免全表扫描。</p><h2 id="_2-什么时候需要建立索引-哪些字段需要作为索引" tabindex="-1"><a class="header-anchor" href="#_2-什么时候需要建立索引-哪些字段需要作为索引" aria-hidden="true">#</a> 2 什么时候需要建立索引，哪些字段需要作为索引</h2><table><thead><tr><th><strong>场景</strong></th><th><strong>说明</strong></th><th><strong>反例</strong></th></tr></thead><tbody><tr><td><strong>WHERE高频字段</strong></td><td>频繁作为查询条件的列（如<code>user_id</code>）</td><td>极少使用的状态字段</td></tr><tr><td><strong>JOIN连接键</strong></td><td>表关联字段（如<code>order.customer_id</code>）</td><td>不参与关联的字段</td></tr><tr><td><strong>排序字段</strong></td><td><code>ORDER BY</code> 常用列（如<code>create_time DESC</code>）</td><td>随机排序的字段</td></tr><tr><td><strong>高区分度字段</strong></td><td>基数（Cardinality）高的列（如手机号 vs 性别）</td><td>布尔值、枚举值（区分度&lt;10%）</td></tr><tr><td><strong>覆盖索引场景</strong></td><td>查询可通过索引直接返回数据（避免回表）</td><td><code>SELECT *</code> 查询</td></tr><tr><td><strong>数据量 &gt; 10%表总量</strong></td><td>大数据量过滤时生效（否则优化器可能选全表扫描）</td><td>小表（&lt;1万行）</td></tr></tbody></table><h2 id="_3-如何建立索引" tabindex="-1"><a class="header-anchor" href="#_3-如何建立索引" aria-hidden="true">#</a> 3 如何建立索引</h2><ul><li>对于一般情况下，建立普通索引。</li><li>如果想要避免回表，直接建立联合索引。联合索引建立遵循**最左原则*。 <ul><li>最左原则示例：INDEX idx_name_age (name, age) <ul><li>WHERE name = &#39;Alice&#39; -- √ 生效</li><li>WHERE name = &#39;Bob&#39; AND age&gt;25 -- √ 生效</li><li>WHERE age = 30 -- ✘ 不生效</li></ul></li></ul></li><li>对于大字符串类型的字段，建立<strong>前缀索引</strong>。 <ul><li>文本过长时取前N字符（需平衡区分度）：<code>ALTER TABLE users ADD INDEX idx_email_prefix(email(20));</code></li></ul></li></ul><h2 id="_4-索引的维护" tabindex="-1"><a class="header-anchor" href="#_4-索引的维护" aria-hidden="true">#</a> 4 索引的维护</h2>',8),o=[i];function n(s,h){return d(),e("div",null,o)}const c=t(a,[["render",n],["__file","suoyinyouhuazhishidian.html.vue"]]);export{c as default};
