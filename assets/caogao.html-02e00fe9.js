import{_ as t,o as s,c as e,a as i}from"./app-be491351.js";const d={},l=i('<h1 id="草稿" tabindex="-1"><a class="header-anchor" href="#草稿" aria-hidden="true">#</a> 草稿</h1><h2 id="系统优化步骤。" tabindex="-1"><a class="header-anchor" href="#系统优化步骤。" aria-hidden="true">#</a> 系统优化步骤。</h2><h3 id="_1-前端优化-减少表单打开时的请求量。" tabindex="-1"><a class="header-anchor" href="#_1-前端优化-减少表单打开时的请求量。" aria-hidden="true">#</a> 1 前端优化，减少表单打开时的请求量。</h3><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 静态资源考虑使用专门的静态资源服务器部署。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 背景图片相关资源进行压缩。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 懒加载表单，减少crossui请求，从表单越多，减少的请求越多。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 懒加载地图组件js。减少近400个请求，包括js和css。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 架构升级，vue-cli版本升级。</li></ul><h3 id="_2-索引优化。" tabindex="-1"><a class="header-anchor" href="#_2-索引优化。" aria-hidden="true">#</a> 2 索引优化。</h3><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> BZ_开头的表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> APP_表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 业务Entity表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 产品表索引</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> PCC_开头表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 其他模型相关表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> DASC安全表索引，USER，ROLE，ACE等表。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> Activiti 流程信息表索引。</li></ul><h3 id="_3-服务器层面-增加两台应用服务器-使用nginx代理-启用权重方式-使用更符合现状的负载策略。" tabindex="-1"><a class="header-anchor" href="#_3-服务器层面-增加两台应用服务器-使用nginx代理-启用权重方式-使用更符合现状的负载策略。" aria-hidden="true">#</a> 3 服务器层面，增加两台应用服务器，使用NGINX代理，启用权重方式，使用更符合现状的负载策略。</h3><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 最小连接数+被动监测，超时记录错误，达到错误上线数时，临时下线错误节点。 <ul><li>请求超过2分钟判断为错误，错误数+1</li><li>错误数达到5次时将错误节点临时下线1天。</li></ul></li></ul><h3 id="_4-应用层面" tabindex="-1"><a class="header-anchor" href="#_4-应用层面" aria-hidden="true">#</a> 4 应用层面</h3><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 数据字典优化，前端统一获取字典请求。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 材料加载优化。</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 保存优化。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 报盘导入优化：界址点部分内容，从数据包保存修改为原生JDBC批量插入。 <ul><li>对于1万5个界址点项目，导入从50s优化到6s</li></ul></li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> SQL相关内容优化。 <ul><li>子查询拆分。</li><li>关联字段索引添加。</li><li>关联逻辑优化。</li><li>数据查询到数字的sql修改，去除非必要的表。 <ul><li>批准预警查询优化。</li><li>批复箱子查询优化。</li></ul></li></ul></li></ul><p>SQL优化记录</p><table><thead><tr><th>SQL</th><th>优化前</th><th>优化后</th><th>备注</th></tr></thead><tbody><tr><td>dynamicsql/useingRegulate.xml getApproveBoxEnd</td><td>2.2s</td><td>150ms</td><td>办结箱</td></tr><tr><td>dynamicsql\\useingRegulate.xml getEndApprove_Detail</td><td>1.1s</td><td>50ms</td><td>办结箱详情</td></tr><tr><td>uf_getboxendcount</td><td>2s</td><td>150ms</td><td>办结箱数量查询</td></tr><tr><td>getAcceptBox</td><td>5s</td><td>500ms</td><td>接件箱</td></tr><tr><td>getUseSPApprove_Detail</td><td>600ms-1s</td><td>100ms</td><td>待办箱子审批箱详情</td></tr><tr><td>uf_getboxtodocount</td><td>600ms-900ms</td><td>150ms</td><td>待办箱子数量查询</td></tr><tr><td></td><td>600ms-900ms</td><td>150ms</td><td>收件箱数量查询</td></tr><tr><td>uf_getboxdonecount</td><td>1s</td><td>800ms</td><td>已办箱数量查询</td></tr><tr><td>getApproveBoxDone_sp</td><td>1.5s</td><td>1s</td><td>已办箱（待进一步优化）</td></tr><tr><td></td><td></td><td></td><td>批复箱</td></tr><tr><td>getKyPayment</td><td>5s</td><td></td><td>矿压协议箱</td></tr><tr><td>getQueryBox_DetailSimple</td><td>1s</td><td>400ms</td><td>查询统计子查询优化</td></tr><tr><td>getBoxAdminQueryStatistics_Detail</td><td>3s</td><td>50ms</td><td>运维箱详情优化</td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table>',12),c=[l];function a(h,k){return s(),e("div",null,c)}const r=t(d,[["render",a],["__file","caogao.html.vue"]]);export{r as default};
