import{_ as o,r as t,o as r,c as l,b as a,d as s,e as p,a as n}from"./app-be491351.js";const c={},i=n(`<h1 id="ollama基本使用" tabindex="-1"><a class="header-anchor" href="#ollama基本使用" aria-hidden="true">#</a> Ollama基本使用</h1><h2 id="_1-模型下载" tabindex="-1"><a class="header-anchor" href="#_1-模型下载" aria-hidden="true">#</a> 1 模型下载</h2><h3 id="列举模型" tabindex="-1"><a class="header-anchor" href="#列举模型" aria-hidden="true">#</a> 列举模型</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命令</span>
ollama <span class="token function">ls</span>

<span class="token comment"># 示例</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> ollama <span class="token function">ls</span>
NAME                   ID              SIZE      MODIFIED
qwen2.5-coder:7b       dae161e27b0e    <span class="token number">4.7</span> GB    <span class="token number">5</span> months ago
llama3.1:latest        46e0c10c039e    <span class="token number">4.9</span> GB    <span class="token number">9</span> months ago
deepseek-coder:6.7b    ce298d984115    <span class="token number">3.8</span> GB    <span class="token number">9</span> months ago
deepseek-r1:8b         28f8fd6cdc67    <span class="token number">4.9</span> GB    <span class="token number">9</span> months ago
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="下载模型" tabindex="-1"><a class="header-anchor" href="#下载模型" aria-hidden="true">#</a> 下载模型</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命令</span>
ollama pull <span class="token operator">&lt;</span>模型标识<span class="token operator">&gt;</span>

<span class="token comment"># 示例</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> ollama pull translategemma
pulling manifest
pulling bdbf939b402e:   <span class="token number">0</span>% ▕                                   ▏  <span class="token number">16</span> MB/3.3 GB  <span class="token number">7.2</span> MB/s   7m37s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除模型" tabindex="-1"><a class="header-anchor" href="#删除模型" aria-hidden="true">#</a> 删除模型</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命令</span>
ollama <span class="token function">rm</span> <span class="token operator">&lt;</span>模型标识<span class="token operator">&gt;</span>

<span class="token comment"># 示例</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> ollama <span class="token function">rm</span> lauchacarro/qwen2.5-translator:latest
deleted <span class="token string">&#39;lauchacarro/qwen2.5-translator:latest&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-部署本地模型" tabindex="-1"><a class="header-anchor" href="#_2-部署本地模型" aria-hidden="true">#</a> 2 部署本地模型</h2><blockquote><p>通过<code>Modelfile</code>进行创建。</p></blockquote><h2 id="_3-模型运行" tabindex="-1"><a class="header-anchor" href="#_3-模型运行" aria-hidden="true">#</a> 3 模型运行</h2><h3 id="运行模型" tabindex="-1"><a class="header-anchor" href="#运行模型" aria-hidden="true">#</a> 运行模型</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命令</span>
ollama run <span class="token operator">&lt;</span>模型标识<span class="token operator">&gt;</span>

<span class="token comment"># 示例</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> ollama run translategemma
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="停止模型" tabindex="-1"><a class="header-anchor" href="#停止模型" aria-hidden="true">#</a> 停止模型</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命令</span>
ollama stop <span class="token operator">&lt;</span>模型标识<span class="token operator">&gt;</span>

<span class="token comment"># 示例</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token punctuation">\\</span>Desktop<span class="token operator">&gt;</span> ollama stop translategemma:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-gpu部分" tabindex="-1"><a class="header-anchor" href="#_4-gpu部分" aria-hidden="true">#</a> 4 GPU部分</h2>`,16),d=a("code",null,"Ollama",-1),u=a("code",null,"ollama ps",-1),k={href:"https://docs.ollama.com/gpu",target:"_blank",rel:"noopener noreferrer"},m=n(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 从 PROCESSOR 列的输出可以看出来使用的是CPU进行的模型计算输出。</span>
PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> ollama <span class="token function">ps</span>
NAME        ID              SIZE      PROCESSOR    CONTEXT    UNTIL
qwen3:4b    359d7dd4bcda    <span class="token number">3.5</span> GB    <span class="token number">100</span>% CPU     <span class="token number">4096</span>       <span class="token number">51</span> seconds from now
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1-ollama显卡支持列表" tabindex="-1"><a class="header-anchor" href="#_4-1-ollama显卡支持列表" aria-hidden="true">#</a> 4.1 Ollama显卡支持列表</h3>`,2),b={href:"https://developer.nvidia.com/cuda/gpus#",target:"_blank",rel:"noopener noreferrer"},v=n(`<h3 id="_4-2-使用gpu进行加速" tabindex="-1"><a class="header-anchor" href="#_4-2-使用gpu进行加速" aria-hidden="true">#</a> 4.2 使用GPU进行加速</h3><h4 id="第一步-查看当前显卡信息" tabindex="-1"><a class="header-anchor" href="#第一步-查看当前显卡信息" aria-hidden="true">#</a> 第一步：查看当前显卡信息</h4><p>使用命令<code>nvidia-smi</code>，重点关注<code>CUDA Version</code>的版本。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> nvidia-smi
Thu Jan <span class="token number">22</span> <span class="token number">10</span>:02:28 <span class="token number">2026</span>
+-----------------------------------------------------------------------------+
<span class="token operator">|</span> NVIDIA-SMI <span class="token number">472.12</span>       Driver Version: <span class="token number">472.12</span>       CUDA Version: <span class="token number">11.4</span>     <span class="token operator">|</span>
<span class="token operator">|</span>-------------------------------+----------------------+----------------------+
<span class="token operator">|</span> GPU  Name            TCC/WDDM <span class="token operator">|</span> Bus-Id        Disp.A <span class="token operator">|</span> Volatile Uncorr. ECC <span class="token operator">|</span>
<span class="token operator">|</span> Fan  Temp  Perf  Pwr:Usage/Cap<span class="token operator">|</span>         Memory-Usage <span class="token operator">|</span> GPU-Util  Compute M. <span class="token operator">|</span>
<span class="token operator">|</span>                               <span class="token operator">|</span>                      <span class="token operator">|</span>               MIG M. <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">0</span>  NVIDIA GeForce <span class="token punctuation">..</span>. WDDM  <span class="token operator">|</span> 00000000:01:00.0  On <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">61</span>%   24C    P8    16W / 170W <span class="token operator">|</span>   2896MiB / 12288MiB <span class="token operator">|</span>      <span class="token number">6</span>%      Default <span class="token operator">|</span>
<span class="token operator">|</span>                               <span class="token operator">|</span>                      <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
<span class="token operator">|</span> Processes:                                                                  <span class="token operator">|</span>
<span class="token operator">|</span>  GPU   GI   CI        PID   Type   Process name                  GPU Memory <span class="token operator">|</span>
<span class="token operator">|</span>        ID   ID                                                   Usage      <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">1208</span>    C+G   <span class="token punctuation">..</span>.updated_web<span class="token punctuation">\\</span>WXWorkWeb.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">2388</span>    C+G   <span class="token punctuation">..</span>.8bbwe<span class="token punctuation">\\</span>WindowsTerminal.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">2516</span>    C+G   <span class="token punctuation">..</span>.le<span class="token punctuation">\\</span>current<span class="token punctuation">\\</span>STranslate.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">2684</span>    C+G   C:<span class="token punctuation">\\</span>Windows<span class="token punctuation">\\</span>System32<span class="token punctuation">\\</span>dwm.exe     N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">4596</span>    C+G   <span class="token punctuation">..</span>.t<span class="token punctuation">\\</span>runtime<span class="token punctuation">\\</span>WeChatAppEx.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">5220</span>    C+G   <span class="token punctuation">..</span>.ge<span class="token punctuation">\\</span>Application<span class="token punctuation">\\</span>msedge.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A      <span class="token number">9772</span>    C+G   <span class="token punctuation">..</span>.rograms<span class="token punctuation">\\</span>PixPin<span class="token punctuation">\\</span>PixPin.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">11588</span>    C+G   C:<span class="token punctuation">\\</span>Windows<span class="token punctuation">\\</span>explorer.exe         N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">11596</span>    C+G   <span class="token punctuation">..</span>.ws<span class="token punctuation">\\</span>System32<span class="token punctuation">\\</span>ShellHost.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">12592</span>    C+G   <span class="token punctuation">..</span>.n1h2txyewy<span class="token punctuation">\\</span>SearchHost.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">12600</span>    C+G   <span class="token punctuation">..</span>.artMenuExperienceHost.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">14900</span>    C+G   <span class="token punctuation">..</span>.e<span class="token punctuation">\\</span>root<span class="token punctuation">\\</span>Office16<span class="token punctuation">\\</span>EXCEL.EXE    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">15088</span>    C+G   <span class="token punctuation">..</span>.2txyewy<span class="token punctuation">\\</span>TextInputHost.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">16876</span>    C+G   <span class="token punctuation">..</span>.n<span class="token punctuation">\\</span>jbr<span class="token punctuation">\\</span>bin<span class="token punctuation">\\</span>jcef_helper.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">20492</span>    C+G   <span class="token punctuation">..</span>.lugins<span class="token punctuation">\\</span>FlutterPlugins.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">20504</span>    C+G   <span class="token punctuation">..</span>.y<span class="token punctuation">\\</span>ShellExperienceHost.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">22436</span>    C+G   <span class="token punctuation">..</span>.are<span class="token punctuation">\\</span>Obsidian<span class="token punctuation">\\</span>Obsidian.exe    N/A      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">0</span>   N/A  N/A     <span class="token number">24212</span>    C+G   <span class="token punctuation">..</span>.ueil<span class="token punctuation">\\</span>Software<span class="token punctuation">\\</span>QQNT<span class="token punctuation">\\</span>QQ.exe    N/A      <span class="token operator">|</span>
+-----------------------------------------------------------------------------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="第二步-安装cuda支持工具cudatoolkit" tabindex="-1"><a class="header-anchor" href="#第二步-安装cuda支持工具cudatoolkit" aria-hidden="true">#</a> 第二步：安装CUDA支持工具CudaToolkit</h4><blockquote><p>CudaToolkit版本 <strong>不能大于</strong> 上面的显卡Cuda版本，选择一致版本即可。下载地址：https://developer.nvidia.com/cuda-toolkit-archive。</p></blockquote><p>验证安装，通过<code>nvcc --version</code>命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span> nvcc <span class="token parameter variable">--version</span>
nvcc: NVIDIA <span class="token punctuation">(</span>R<span class="token punctuation">)</span> Cuda compiler driver
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2005</span>-2021 NVIDIA Corporation
Built on Wed_Jun__2_19:25:35_Pacific_Daylight_Time_2021
Cuda compilation tools, release <span class="token number">11.4</span>, V11.4.48
Build cuda_11.4.r11.4/compiler.30033411_0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="第三步-配置环境变量" tabindex="-1"><a class="header-anchor" href="#第三步-配置环境变量" aria-hidden="true">#</a> 第三步：配置环境变量</h4><p>添加以下环境变量：</p><table><thead><tr><th>变量名</th><th>变量值</th><th>备注</th></tr></thead><tbody><tr><td>OLLAMA_GPU_LAYER</td><td>cuda</td><td>指定GPU处理层</td></tr><tr><td>CUDA_VISIBLE_DEVICES</td><td>GPU-4b663a08-f89c-8bb9-8f1f-c6cacb193ec0)</td><td>指定特定ID的显卡工作，不指定则全部工作，通过命令<code>nvidia-smi -L</code>获取显卡ID</td></tr></tbody></table><h4 id="第四步-验证是否跑在gpu上" tabindex="-1"><a class="header-anchor" href="#第四步-验证是否跑在gpu上" aria-hidden="true">#</a> 第四步：验证是否跑在GPU上</h4><p><strong>在推理时</strong>使用<strong>Ollama ps</strong> 即可查看负载情况：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>ollama ps


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14);function h(g,A){const e=t("ExternalLinkIcon");return r(),l("div",null,[i,a("blockquote",null,[a("p",null,[s("默认的"),d,s("现阶段不会跑到GPU上，可以使用命令"),u,s("可以查看当前运行模型运行的资源。官方文档："),a("a",k,[s("Hardware support - Ollama"),p(e)])])]),m,a("p",null,[s("[Ollama 对GPU 支持信息]("),a("a",b,[s("CUDA GPU Compute Capability | NVIDIA Developer"),p(e)]),s(")")]),v])}const C=o(c,[["render",h],["__file","Ollamajibenshiyong.html.vue"]]);export{C as default};
