---
date: 2025-10-14 14:42:09
pageClass: blue-archive
tags:
  - 概念
categories:
  - Linux
---

# 注册系统服务
在 Linux 系统中，将一个 JAR 包作为系统服务来管理，最推荐、最现代的方式是使用 `systemd`。你使用的 Linux Mint 正是基于 `systemd` 的，所以这个方法非常适用。

好处：
- 可以像管理其他系统服务（如 nginx, mysql）一样，用 `systemctl` 命令来启动、停止、重启和查看状态。
- 可以设置服务开机自启。
- 服务崩溃后可以自动重启。
- 日志会统一由 `journalctl` 管理，方便查看。

## 1 Service 基础结构
>Service 服务文件所在路径 `/etc/systemd/system/`。

一个完整的 Service 的结构：
```ini
[Unit]
Description=My Java Application Service # 服务备注
After=network.target # 如果刚需网络, 则执行应该在网络连接之后

[Service]
Type=simple
User=your_username          # 运行该服务的用户，不要用root！
Group=your_username         # 用户的组
WorkingDirectory=/path/to/your/app  # 你的jar包所在的目录
ExecStart=/usr/bin/java -jar /path/to/your/app/your-app.jar
Restart=on-failure          # 如果服务失败，自动重启
RestartSec=10               # 重启前等待10秒
SuccessExitStatus=143       # 正常停止时的退出码

[Install]
WantedBy=multi-user.target
```

 一个极简的 Service 的结构：
```ini
[Unit]
Description=My Java Application Service

[Service]
User=your_username
WorkingDirectory=/path/to/your/app
ExecStart=/usr/bin/java -jar /path/to/your/app/your-app.jar

[Install]
WantedBy=multi-user.target
```

## 2 设置开机启动和启停服务

```sh
# 设置开机启动
sudo systemctl enable myservice.service

# 启动服务
sudo systemctl start myservice.service

# 重启服务
sudo systemctl restart myservice.service

# 停止服务
sudo systemctl stop myservice.service

# 查看服务状态
sudo systemctl status myservice.service
```
## 3 查看服务的运行日志
```sh
# 查看实时日志
sudo journalctl -u myservice -f

# 查看所有历史日志
sudo journalctl -u myservice
```